{"ast":null,"code":"import { addTelemetryDebug, elapsed, ExperimentalFeature, getPathName, includes, isExperimentalFeatureEnabled, isValidUrl, toServerDuration } from '@datadog/browser-core';\nexport var FAKE_INITIAL_DOCUMENT = 'initial_document';\nvar RESOURCE_TYPES = [[\"document\" /* ResourceType.DOCUMENT */, function (initiatorType) {\n  return FAKE_INITIAL_DOCUMENT === initiatorType;\n}], [\"xhr\" /* ResourceType.XHR */, function (initiatorType) {\n  return 'xmlhttprequest' === initiatorType;\n}], [\"fetch\" /* ResourceType.FETCH */, function (initiatorType) {\n  return 'fetch' === initiatorType;\n}], [\"beacon\" /* ResourceType.BEACON */, function (initiatorType) {\n  return 'beacon' === initiatorType;\n}], [\"css\" /* ResourceType.CSS */, function (_, path) {\n  return /\\.css$/i.test(path);\n}], [\"js\" /* ResourceType.JS */, function (_, path) {\n  return /\\.js$/i.test(path);\n}], [\"image\" /* ResourceType.IMAGE */, function (initiatorType, path) {\n  return includes(['image', 'img', 'icon'], initiatorType) || /\\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(path) !== null;\n}], [\"font\" /* ResourceType.FONT */, function (_, path) {\n  return /\\.(woff|eot|woff2|ttf)$/i.exec(path) !== null;\n}], [\"media\" /* ResourceType.MEDIA */, function (initiatorType, path) {\n  return includes(['audio', 'video'], initiatorType) || /\\.(mp3|mp4)$/i.exec(path) !== null;\n}]];\nexport function computeResourceKind(timing) {\n  var url = timing.name;\n  if (!isValidUrl(url)) {\n    addTelemetryDebug(\"Failed to construct URL for \\\"\".concat(timing.name, \"\\\"\"));\n    return \"other\" /* ResourceType.OTHER */;\n  }\n  var path = getPathName(url);\n  for (var _i = 0, RESOURCE_TYPES_1 = RESOURCE_TYPES; _i < RESOURCE_TYPES_1.length; _i++) {\n    var _a = RESOURCE_TYPES_1[_i],\n      type = _a[0],\n      isType = _a[1];\n    if (isType(timing.initiatorType, path)) {\n      return type;\n    }\n  }\n  return \"other\" /* ResourceType.OTHER */;\n}\nfunction areInOrder() {\n  var numbers = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    numbers[_i] = arguments[_i];\n  }\n  for (var i = 1; i < numbers.length; i += 1) {\n    if (numbers[i - 1] > numbers[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nexport function isRequestKind(timing) {\n  return timing.initiatorType === 'xmlhttprequest' || timing.initiatorType === 'fetch';\n}\nexport function computePerformanceResourceDuration(entry) {\n  var duration = entry.duration,\n    startTime = entry.startTime,\n    responseEnd = entry.responseEnd;\n  // Safari duration is always 0 on timings blocked by cross origin policies.\n  if (duration === 0 && startTime < responseEnd) {\n    return toServerDuration(elapsed(startTime, responseEnd));\n  }\n  return toServerDuration(duration);\n}\nexport function computePerformanceResourceDetails(entry) {\n  var validEntry = toValidEntry(entry);\n  if (!validEntry) {\n    return undefined;\n  }\n  var startTime = validEntry.startTime,\n    fetchStart = validEntry.fetchStart,\n    redirectStart = validEntry.redirectStart,\n    redirectEnd = validEntry.redirectEnd,\n    domainLookupStart = validEntry.domainLookupStart,\n    domainLookupEnd = validEntry.domainLookupEnd,\n    connectStart = validEntry.connectStart,\n    secureConnectionStart = validEntry.secureConnectionStart,\n    connectEnd = validEntry.connectEnd,\n    requestStart = validEntry.requestStart,\n    responseStart = validEntry.responseStart,\n    responseEnd = validEntry.responseEnd;\n  var details = {\n    download: formatTiming(startTime, responseStart, responseEnd),\n    first_byte: formatTiming(startTime, requestStart, responseStart)\n  };\n  // Make sure a connection occurred\n  if (fetchStart < connectEnd) {\n    details.connect = formatTiming(startTime, connectStart, connectEnd);\n    // Make sure a secure connection occurred\n    if (connectStart <= secureConnectionStart && secureConnectionStart <= connectEnd) {\n      details.ssl = formatTiming(startTime, secureConnectionStart, connectEnd);\n    }\n  }\n  // Make sure a domain lookup occurred\n  if (fetchStart < domainLookupEnd) {\n    details.dns = formatTiming(startTime, domainLookupStart, domainLookupEnd);\n  }\n  // Make sure a redirection occurred\n  if (startTime < redirectEnd) {\n    details.redirect = formatTiming(startTime, redirectStart, redirectEnd);\n  }\n  return details;\n}\nexport function toValidEntry(entry) {\n  if (isExperimentalFeatureEnabled(ExperimentalFeature.TOLERANT_RESOURCE_TIMINGS)) {\n    return entry;\n  }\n  // Ensure timings are in the right order. On top of filtering out potential invalid\n  // RumPerformanceResourceTiming, it will ignore entries from requests where timings cannot be\n  // collected, for example cross origin requests without a \"Timing-Allow-Origin\" header allowing\n  // it.\n  var areCommonTimingsInOrder = areInOrder(entry.startTime, entry.fetchStart, entry.domainLookupStart, entry.domainLookupEnd, entry.connectStart, entry.connectEnd, entry.requestStart, entry.responseStart, entry.responseEnd);\n  var areRedirectionTimingsInOrder = hasRedirection(entry) ? areInOrder(entry.startTime, entry.redirectStart, entry.redirectEnd, entry.fetchStart) : true;\n  if (areCommonTimingsInOrder && areRedirectionTimingsInOrder) {\n    return entry;\n  }\n}\nfunction hasRedirection(entry) {\n  return entry.redirectEnd > entry.startTime;\n}\nfunction formatTiming(origin, start, end) {\n  if (origin <= start && start <= end) {\n    return {\n      duration: toServerDuration(elapsed(start, end)),\n      start: toServerDuration(elapsed(origin, start))\n    };\n  }\n}\nexport function computeSize(entry) {\n  // Make sure a request actually occurred\n  if (entry.startTime < entry.responseStart) {\n    var encodedBodySize = entry.encodedBodySize,\n      decodedBodySize = entry.decodedBodySize,\n      transferSize = entry.transferSize;\n    return {\n      size: decodedBodySize,\n      encoded_body_size: encodedBodySize,\n      decoded_body_size: decodedBodySize,\n      transfer_size: transferSize\n    };\n  }\n  return {\n    size: undefined,\n    encoded_body_size: undefined,\n    decoded_body_size: undefined,\n    transfer_size: undefined\n  };\n}\nexport function isAllowedRequestUrl(configuration, url) {\n  return url && !configuration.isIntakeUrl(url);\n}\nvar DATA_URL_REGEX = /data:(.+)?(;base64)?,/g;\nexport var MAX_ATTRIBUTE_VALUE_CHAR_LENGTH = 24000;\nexport function isLongDataUrl(url) {\n  if (url.length <= MAX_ATTRIBUTE_VALUE_CHAR_LENGTH) {\n    return false;\n  } else if (url.substring(0, 5) === 'data:') {\n    // Avoid String.match RangeError: Maximum call stack size exceeded\n    url = url.substring(0, MAX_ATTRIBUTE_VALUE_CHAR_LENGTH);\n    return true;\n  }\n  return false;\n}\nexport function sanitizeDataUrl(url) {\n  return \"\".concat(url.match(DATA_URL_REGEX)[0], \"[...]\");\n}","map":{"version":3,"names":["addTelemetryDebug","elapsed","ExperimentalFeature","getPathName","includes","isExperimentalFeatureEnabled","isValidUrl","toServerDuration","FAKE_INITIAL_DOCUMENT","RESOURCE_TYPES","initiatorType","_","path","test","exec","computeResourceKind","timing","url","name","concat","_i","RESOURCE_TYPES_1","length","_a","type","isType","areInOrder","numbers","arguments","i","isRequestKind","computePerformanceResourceDuration","entry","duration","startTime","responseEnd","computePerformanceResourceDetails","validEntry","toValidEntry","undefined","fetchStart","redirectStart","redirectEnd","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","details","download","formatTiming","first_byte","connect","ssl","dns","redirect","TOLERANT_RESOURCE_TIMINGS","areCommonTimingsInOrder","areRedirectionTimingsInOrder","hasRedirection","origin","start","end","computeSize","encodedBodySize","decodedBodySize","transferSize","size","encoded_body_size","decoded_body_size","transfer_size","isAllowedRequestUrl","configuration","isIntakeUrl","DATA_URL_REGEX","MAX_ATTRIBUTE_VALUE_CHAR_LENGTH","isLongDataUrl","substring","sanitizeDataUrl","match"],"sources":["D:\\edu'\\Spritle\\Spritle\\node_modules\\@datadog\\browser-rum-core\\src\\domain\\resource\\resourceUtils.ts"],"sourcesContent":["import type { RelativeTime, ServerDuration } from '@datadog/browser-core'\nimport {\n  addTelemetryDebug,\n  elapsed,\n  ExperimentalFeature,\n  getPathName,\n  includes,\n  isExperimentalFeatureEnabled,\n  isValidUrl,\n  ResourceType,\n  toServerDuration,\n} from '@datadog/browser-core'\n\nimport type { RumPerformanceResourceTiming } from '../../browser/performanceCollection'\n\nimport type { PerformanceResourceDetailsElement } from '../../rawRumEvent.types'\nimport type { RumConfiguration } from '../configuration'\n\nexport interface PerformanceResourceDetails {\n  redirect?: PerformanceResourceDetailsElement\n  dns?: PerformanceResourceDetailsElement\n  connect?: PerformanceResourceDetailsElement\n  ssl?: PerformanceResourceDetailsElement\n  first_byte?: PerformanceResourceDetailsElement\n  download?: PerformanceResourceDetailsElement\n}\n\nexport const FAKE_INITIAL_DOCUMENT = 'initial_document'\n\nconst RESOURCE_TYPES: Array<[ResourceType, (initiatorType: string, path: string) => boolean]> = [\n  [ResourceType.DOCUMENT, (initiatorType: string) => FAKE_INITIAL_DOCUMENT === initiatorType],\n  [ResourceType.XHR, (initiatorType: string) => 'xmlhttprequest' === initiatorType],\n  [ResourceType.FETCH, (initiatorType: string) => 'fetch' === initiatorType],\n  [ResourceType.BEACON, (initiatorType: string) => 'beacon' === initiatorType],\n  [ResourceType.CSS, (_: string, path: string) => /\\.css$/i.test(path)],\n  [ResourceType.JS, (_: string, path: string) => /\\.js$/i.test(path)],\n  [\n    ResourceType.IMAGE,\n    (initiatorType: string, path: string) =>\n      includes(['image', 'img', 'icon'], initiatorType) || /\\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(path) !== null,\n  ],\n  [ResourceType.FONT, (_: string, path: string) => /\\.(woff|eot|woff2|ttf)$/i.exec(path) !== null],\n  [\n    ResourceType.MEDIA,\n    (initiatorType: string, path: string) =>\n      includes(['audio', 'video'], initiatorType) || /\\.(mp3|mp4)$/i.exec(path) !== null,\n  ],\n]\n\nexport function computeResourceKind(timing: RumPerformanceResourceTiming) {\n  const url = timing.name\n  if (!isValidUrl(url)) {\n    addTelemetryDebug(`Failed to construct URL for \"${timing.name}\"`)\n    return ResourceType.OTHER\n  }\n  const path = getPathName(url)\n  for (const [type, isType] of RESOURCE_TYPES) {\n    if (isType(timing.initiatorType, path)) {\n      return type\n    }\n  }\n  return ResourceType.OTHER\n}\n\nfunction areInOrder(...numbers: number[]) {\n  for (let i = 1; i < numbers.length; i += 1) {\n    if (numbers[i - 1] > numbers[i]) {\n      return false\n    }\n  }\n  return true\n}\n\nexport function isRequestKind(timing: RumPerformanceResourceTiming) {\n  return timing.initiatorType === 'xmlhttprequest' || timing.initiatorType === 'fetch'\n}\n\nexport function computePerformanceResourceDuration(entry: RumPerformanceResourceTiming): ServerDuration {\n  const { duration, startTime, responseEnd } = entry\n\n  // Safari duration is always 0 on timings blocked by cross origin policies.\n  if (duration === 0 && startTime < responseEnd) {\n    return toServerDuration(elapsed(startTime, responseEnd))\n  }\n\n  return toServerDuration(duration)\n}\n\nexport function computePerformanceResourceDetails(\n  entry: RumPerformanceResourceTiming\n): PerformanceResourceDetails | undefined {\n  const validEntry = toValidEntry(entry)\n\n  if (!validEntry) {\n    return undefined\n  }\n  const {\n    startTime,\n    fetchStart,\n    redirectStart,\n    redirectEnd,\n    domainLookupStart,\n    domainLookupEnd,\n    connectStart,\n    secureConnectionStart,\n    connectEnd,\n    requestStart,\n    responseStart,\n    responseEnd,\n  } = validEntry\n\n  const details: PerformanceResourceDetails = {\n    download: formatTiming(startTime, responseStart, responseEnd),\n    first_byte: formatTiming(startTime, requestStart, responseStart),\n  }\n\n  // Make sure a connection occurred\n  if (fetchStart < connectEnd) {\n    details.connect = formatTiming(startTime, connectStart, connectEnd)\n\n    // Make sure a secure connection occurred\n    if (connectStart <= secureConnectionStart && secureConnectionStart <= connectEnd) {\n      details.ssl = formatTiming(startTime, secureConnectionStart, connectEnd)\n    }\n  }\n\n  // Make sure a domain lookup occurred\n  if (fetchStart < domainLookupEnd) {\n    details.dns = formatTiming(startTime, domainLookupStart, domainLookupEnd)\n  }\n\n  // Make sure a redirection occurred\n  if (startTime < redirectEnd) {\n    details.redirect = formatTiming(startTime, redirectStart, redirectEnd)\n  }\n\n  return details\n}\n\nexport function toValidEntry(entry: RumPerformanceResourceTiming) {\n  if (isExperimentalFeatureEnabled(ExperimentalFeature.TOLERANT_RESOURCE_TIMINGS)) {\n    return entry\n  }\n\n  // Ensure timings are in the right order. On top of filtering out potential invalid\n  // RumPerformanceResourceTiming, it will ignore entries from requests where timings cannot be\n  // collected, for example cross origin requests without a \"Timing-Allow-Origin\" header allowing\n  // it.\n  const areCommonTimingsInOrder = areInOrder(\n    entry.startTime,\n    entry.fetchStart,\n    entry.domainLookupStart,\n    entry.domainLookupEnd,\n    entry.connectStart,\n    entry.connectEnd,\n    entry.requestStart,\n    entry.responseStart,\n    entry.responseEnd\n  )\n\n  const areRedirectionTimingsInOrder = hasRedirection(entry)\n    ? areInOrder(entry.startTime, entry.redirectStart, entry.redirectEnd, entry.fetchStart)\n    : true\n\n  if (areCommonTimingsInOrder && areRedirectionTimingsInOrder) {\n    return entry\n  }\n}\n\nfunction hasRedirection(entry: RumPerformanceResourceTiming) {\n  return entry.redirectEnd > entry.startTime\n}\nfunction formatTiming(origin: RelativeTime, start: RelativeTime, end: RelativeTime) {\n  if (origin <= start && start <= end) {\n    return {\n      duration: toServerDuration(elapsed(start, end)),\n      start: toServerDuration(elapsed(origin, start)),\n    }\n  }\n}\n\nexport function computeSize(entry: RumPerformanceResourceTiming) {\n  // Make sure a request actually occurred\n  if (entry.startTime < entry.responseStart) {\n    const { encodedBodySize, decodedBodySize, transferSize } = entry\n    return {\n      size: decodedBodySize,\n      encoded_body_size: encodedBodySize,\n      decoded_body_size: decodedBodySize,\n      transfer_size: transferSize,\n    }\n  }\n  return {\n    size: undefined,\n    encoded_body_size: undefined,\n    decoded_body_size: undefined,\n    transfer_size: undefined,\n  }\n}\n\nexport function isAllowedRequestUrl(configuration: RumConfiguration, url: string) {\n  return url && !configuration.isIntakeUrl(url)\n}\n\nconst DATA_URL_REGEX = /data:(.+)?(;base64)?,/g\nexport const MAX_ATTRIBUTE_VALUE_CHAR_LENGTH = 24_000\n\nexport function isLongDataUrl(url: string): boolean {\n  if (url.length <= MAX_ATTRIBUTE_VALUE_CHAR_LENGTH) {\n    return false\n  } else if (url.substring(0, 5) === 'data:') {\n    // Avoid String.match RangeError: Maximum call stack size exceeded\n    url = url.substring(0, MAX_ATTRIBUTE_VALUE_CHAR_LENGTH)\n    return true\n  }\n  return false\n}\n\nexport function sanitizeDataUrl(url: string): string {\n  return `${url.match(DATA_URL_REGEX)![0]}[...]`\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}