{"ast":null,"code":"import { addEventListeners, DOM_EVENT } from '@datadog/browser-core';\nexport function trackFirstHidden(configuration, eventTarget) {\n  if (eventTarget === void 0) {\n    eventTarget = window;\n  }\n  var timeStamp;\n  var stopListeners;\n  if (document.visibilityState === 'hidden') {\n    timeStamp = 0;\n  } else {\n    timeStamp = Infinity;\n    stopListeners = addEventListeners(configuration, eventTarget, [DOM_EVENT.PAGE_HIDE, DOM_EVENT.VISIBILITY_CHANGE], function (event) {\n      if (event.type === DOM_EVENT.PAGE_HIDE || document.visibilityState === 'hidden') {\n        timeStamp = event.timeStamp;\n        stopListeners();\n      }\n    }, {\n      capture: true\n    }).stop;\n  }\n  return {\n    get timeStamp() {\n      return timeStamp;\n    },\n    stop: function () {\n      stopListeners === null || stopListeners === void 0 ? void 0 : stopListeners();\n    }\n  };\n}","map":{"version":3,"names":["addEventListeners","DOM_EVENT","trackFirstHidden","configuration","eventTarget","window","timeStamp","stopListeners","document","visibilityState","Infinity","PAGE_HIDE","VISIBILITY_CHANGE","event","type","capture","stop"],"sources":["D:\\edu'\\Spritle\\spritle\\node_modules\\@datadog\\browser-rum-core\\src\\domain\\view\\viewMetrics\\trackFirstHidden.ts"],"sourcesContent":["import type { RelativeTime } from '@datadog/browser-core'\nimport { addEventListeners, DOM_EVENT } from '@datadog/browser-core'\nimport type { RumConfiguration } from '../../configuration'\n\nexport type FirstHidden = ReturnType<typeof trackFirstHidden>\n\nexport function trackFirstHidden(configuration: RumConfiguration, eventTarget: Window = window) {\n  let timeStamp: RelativeTime\n  let stopListeners: () => void | undefined\n\n  if (document.visibilityState === 'hidden') {\n    timeStamp = 0 as RelativeTime\n  } else {\n    timeStamp = Infinity as RelativeTime\n    ;({ stop: stopListeners } = addEventListeners(\n      configuration,\n      eventTarget,\n      [DOM_EVENT.PAGE_HIDE, DOM_EVENT.VISIBILITY_CHANGE],\n      (event) => {\n        if (event.type === DOM_EVENT.PAGE_HIDE || document.visibilityState === 'hidden') {\n          timeStamp = event.timeStamp as RelativeTime\n          stopListeners()\n        }\n      },\n      { capture: true }\n    ))\n  }\n\n  return {\n    get timeStamp() {\n      return timeStamp\n    },\n    stop() {\n      stopListeners?.()\n    },\n  }\n}\n"],"mappings":"AACA,SAASA,iBAAiB,EAAEC,SAAS,QAAQ,uBAAuB;AAKpE,OAAM,SAAUC,gBAAgBA,CAACC,aAA+B,EAAEC,WAA4B;EAA5B,IAAAA,WAAA;IAAAA,WAAA,GAAAC,MAA4B;EAAA;EAC5F,IAAIC,SAAuB;EAC3B,IAAIC,aAAqC;EAEzC,IAAIC,QAAQ,CAACC,eAAe,KAAK,QAAQ,EAAE;IACzCH,SAAS,GAAG,CAAiB;EAC/B,CAAC,MAAM;IACLA,SAAS,GAAGI,QAAwB;IAC1BH,aAAa,GAAKP,iBAAiB,CAC3CG,aAAa,EACbC,WAAW,EACX,CAACH,SAAS,CAACU,SAAS,EAAEV,SAAS,CAACW,iBAAiB,CAAC,EAClD,UAACC,KAAK;MACJ,IAAIA,KAAK,CAACC,IAAI,KAAKb,SAAS,CAACU,SAAS,IAAIH,QAAQ,CAACC,eAAe,KAAK,QAAQ,EAAE;QAC/EH,SAAS,GAAGO,KAAK,CAACP,SAAyB;QAC3CC,aAAa,EAAE;MACjB;IACF,CAAC,EACD;MAAEQ,OAAO,EAAE;IAAI,CAAE,CAClB,CAAAC,IAXsB;EAYzB;EAEA,OAAO;IACL,IAAIV,SAASA,CAAA;MACX,OAAOA,SAAS;IAClB,CAAC;IACDU,IAAI,WAAAA,CAAA;MACFT,aAAa,aAAbA,aAAa,uBAAbA,aAAa,EAAI;IACnB;GACD;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}