{"ast":null,"code":"import { trackCumulativeLayoutShift } from './trackCumulativeLayoutShift';\nimport { trackInteractionToNextPaint } from './trackInteractionToNextPaint';\nimport { trackLoadingTime } from './trackLoadingTime';\nimport { trackScrollMetrics } from './trackScrollMetrics';\nexport function trackCommonViewMetrics(lifeCycle, domMutationObservable, configuration, scheduleViewUpdate, loadingType, viewStart) {\n  var commonViewMetrics = {};\n  var _a = trackLoadingTime(lifeCycle, domMutationObservable, configuration, loadingType, viewStart, function (newLoadingTime) {\n      commonViewMetrics.loadingTime = newLoadingTime;\n      scheduleViewUpdate();\n    }),\n    stopLoadingTimeTracking = _a.stop,\n    setLoadEvent = _a.setLoadEvent;\n  var stopScrollMetricsTracking = trackScrollMetrics(configuration, viewStart, function (newScrollMetrics) {\n    commonViewMetrics.scroll = newScrollMetrics;\n  }).stop;\n  var stopCLSTracking = trackCumulativeLayoutShift(configuration, lifeCycle, function (cumulativeLayoutShift) {\n    commonViewMetrics.cumulativeLayoutShift = cumulativeLayoutShift;\n    scheduleViewUpdate();\n  }).stop;\n  var _b = trackInteractionToNextPaint(configuration, viewStart.relative, loadingType, lifeCycle),\n    stopINPTracking = _b.stop,\n    getInteractionToNextPaint = _b.getInteractionToNextPaint,\n    setViewEnd = _b.setViewEnd;\n  return {\n    stop: function () {\n      stopLoadingTimeTracking();\n      stopCLSTracking();\n      stopScrollMetricsTracking();\n    },\n    stopINPTracking: stopINPTracking,\n    setLoadEvent: setLoadEvent,\n    setViewEnd: setViewEnd,\n    getCommonViewMetrics: function () {\n      commonViewMetrics.interactionToNextPaint = getInteractionToNextPaint();\n      return commonViewMetrics;\n    }\n  };\n}","map":{"version":3,"names":["trackCumulativeLayoutShift","trackInteractionToNextPaint","trackLoadingTime","trackScrollMetrics","trackCommonViewMetrics","lifeCycle","domMutationObservable","configuration","scheduleViewUpdate","loadingType","viewStart","commonViewMetrics","_a","newLoadingTime","loadingTime","stopLoadingTimeTracking","stop","setLoadEvent","stopScrollMetricsTracking","newScrollMetrics","scroll","stopCLSTracking","cumulativeLayoutShift","_b","relative","stopINPTracking","getInteractionToNextPaint","setViewEnd","getCommonViewMetrics","interactionToNextPaint"],"sources":["D:\\edu'\\Spritle\\Spritle\\node_modules\\@datadog\\browser-rum-core\\src\\domain\\view\\viewMetrics\\trackCommonViewMetrics.ts"],"sourcesContent":["import type { ClocksState, Duration, Observable } from '@datadog/browser-core'\nimport type { ViewLoadingType } from '../../../rawRumEvent.types'\nimport type { RumConfiguration } from '../../configuration'\nimport type { LifeCycle } from '../../lifeCycle'\nimport type { CumulativeLayoutShift } from './trackCumulativeLayoutShift'\nimport { trackCumulativeLayoutShift } from './trackCumulativeLayoutShift'\nimport type { InteractionToNextPaint } from './trackInteractionToNextPaint'\nimport { trackInteractionToNextPaint } from './trackInteractionToNextPaint'\nimport { trackLoadingTime } from './trackLoadingTime'\nimport type { ScrollMetrics } from './trackScrollMetrics'\nimport { trackScrollMetrics } from './trackScrollMetrics'\n\nexport interface CommonViewMetrics {\n  loadingTime?: Duration\n  cumulativeLayoutShift?: CumulativeLayoutShift\n  interactionToNextPaint?: InteractionToNextPaint\n  scroll?: ScrollMetrics\n}\n\nexport function trackCommonViewMetrics(\n  lifeCycle: LifeCycle,\n  domMutationObservable: Observable<void>,\n  configuration: RumConfiguration,\n  scheduleViewUpdate: () => void,\n  loadingType: ViewLoadingType,\n  viewStart: ClocksState\n) {\n  const commonViewMetrics: CommonViewMetrics = {}\n\n  const { stop: stopLoadingTimeTracking, setLoadEvent } = trackLoadingTime(\n    lifeCycle,\n    domMutationObservable,\n    configuration,\n    loadingType,\n    viewStart,\n    (newLoadingTime) => {\n      commonViewMetrics.loadingTime = newLoadingTime\n      scheduleViewUpdate()\n    }\n  )\n\n  const { stop: stopScrollMetricsTracking } = trackScrollMetrics(configuration, viewStart, (newScrollMetrics) => {\n    commonViewMetrics.scroll = newScrollMetrics\n  })\n\n  const { stop: stopCLSTracking } = trackCumulativeLayoutShift(configuration, lifeCycle, (cumulativeLayoutShift) => {\n    commonViewMetrics.cumulativeLayoutShift = cumulativeLayoutShift\n    scheduleViewUpdate()\n  })\n\n  const {\n    stop: stopINPTracking,\n    getInteractionToNextPaint,\n    setViewEnd,\n  } = trackInteractionToNextPaint(configuration, viewStart.relative, loadingType, lifeCycle)\n\n  return {\n    stop: () => {\n      stopLoadingTimeTracking()\n      stopCLSTracking()\n      stopScrollMetricsTracking()\n    },\n    stopINPTracking,\n    setLoadEvent,\n    setViewEnd,\n    getCommonViewMetrics: () => {\n      commonViewMetrics.interactionToNextPaint = getInteractionToNextPaint()\n      return commonViewMetrics\n    },\n  }\n}\n"],"mappings":"AAKA,SAASA,0BAA0B,QAAQ,8BAA8B;AAEzE,SAASC,2BAA2B,QAAQ,+BAA+B;AAC3E,SAASC,gBAAgB,QAAQ,oBAAoB;AAErD,SAASC,kBAAkB,QAAQ,sBAAsB;AASzD,OAAM,SAAUC,sBAAsBA,CACpCC,SAAoB,EACpBC,qBAAuC,EACvCC,aAA+B,EAC/BC,kBAA8B,EAC9BC,WAA4B,EAC5BC,SAAsB;EAEtB,IAAMC,iBAAiB,GAAsB,EAAE;EAEzC,IAAAC,EAAA,GAAkDV,gBAAgB,CACtEG,SAAS,EACTC,qBAAqB,EACrBC,aAAa,EACbE,WAAW,EACXC,SAAS,EACT,UAACG,cAAc;MACbF,iBAAiB,CAACG,WAAW,GAAGD,cAAc;MAC9CL,kBAAkB,EAAE;IACtB,CAAC,CACF;IAVaO,uBAAuB,GAAAH,EAAA,CAAAI,IAAA;IAAEC,YAAY,GAAAL,EAAA,CAAAK,YAUlD;EAEO,IAAMC,yBAAyB,GAAKf,kBAAkB,CAACI,aAAa,EAAEG,SAAS,EAAE,UAACS,gBAAgB;IACxGR,iBAAiB,CAACS,MAAM,GAAGD,gBAAgB;EAC7C,CAAC,CAAC,CAAAH,IAFqC;EAI/B,IAAMK,eAAe,GAAKrB,0BAA0B,CAACO,aAAa,EAAEF,SAAS,EAAE,UAACiB,qBAAqB;IAC3GX,iBAAiB,CAACW,qBAAqB,GAAGA,qBAAqB;IAC/Dd,kBAAkB,EAAE;EACtB,CAAC,CAAC,CAAAQ,IAH2B;EAKvB,IAAAO,EAAA,GAIFtB,2BAA2B,CAACM,aAAa,EAAEG,SAAS,CAACc,QAAQ,EAAEf,WAAW,EAAEJ,SAAS,CAAC;IAHlFoB,eAAe,GAAAF,EAAA,CAAAP,IAAA;IACrBU,yBAAyB,GAAAH,EAAA,CAAAG,yBAAA;IACzBC,UAAU,GAAAJ,EAAA,CAAAI,UAC8E;EAE1F,OAAO;IACLX,IAAI,EAAE,SAAAA,CAAA;MACJD,uBAAuB,EAAE;MACzBM,eAAe,EAAE;MACjBH,yBAAyB,EAAE;IAC7B,CAAC;IACDO,eAAe,EAAAA,eAAA;IACfR,YAAY,EAAAA,YAAA;IACZU,UAAU,EAAAA,UAAA;IACVC,oBAAoB,EAAE,SAAAA,CAAA;MACpBjB,iBAAiB,CAACkB,sBAAsB,GAAGH,yBAAyB,EAAE;MACtE,OAAOf,iBAAiB;IAC1B;GACD;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}